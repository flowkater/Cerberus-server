<style>
.fancyprogress {
  height: 25px;
  background: #ebebeb;
  border-left: 1px solid transparent;
  border-right: 1px solid transparent;
  border-radius: 10px;
  cursor: pointer; cursor: hand;
}
.fancyprogress > span {
  position: relative;
  float: left;
  margin: 0px;
  min-width: 30px;
  height: 24px;
  line-height: 16px;
  text-align: right;
  background: #cccccc;
  border: 1px solid;
  border-color: #bfbfbf #b3b3b3 #9e9e9e;
  border-radius: 10px;
  background-image: -webkit-linear-gradient(top, #f0f0f0, #dbdbdb 70%, #cccccc);
  background-image: -moz-linear-gradient(top, #f0f0f0, #dbdbdb 70%, #cccccc);
  background-image: -o-linear-gradient(top, #f0f0f0, #dbdbdb 70%, #cccccc);
  background-image: linear-gradient(to bottom, #f0f0f0, #dbdbdb 70%, #cccccc);
  -webkit-box-shadow: inset 0 1px rgba(255, 255, 255, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2);
  box-shadow: inset 0 1px rgba(255, 255, 255, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2);
}

.fancyprogress > span > span {
  padding: 0 8px;
  font-size: 20px;
  font-weight: bold;
  color: #404040;
  color: rgba(0, 0, 0, 0.7);
  text-shadow: 0 1px rgba(255, 255, 255, 0.4);
}
.fancyprogress > span:before {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
  height: 25px;
  background: url( <%= asset_path 'progress.png' %>) 0 0 repeat-x;

  border-radius: 10px;
}
.fancyprogress .green {
  background: #85c440;
  border-color: #78b337 #6ba031 #568128;
  background-image: -webkit-linear-gradient(top, #b7dc8e, #99ce5f 70%, #85c440);
  background-image: -moz-linear-gradient(top, #b7dc8e, #99ce5f 70%, #85c440);
  background-image: -o-linear-gradient(top, #b7dc8e, #99ce5f 70%, #85c440);
  background-image: linear-gradient(to bottom, #b7dc8e, #99ce5f 70%, #85c440);
}
.fancyprogress .green2 {
  background: #568128;
  border-color: #000000 #000000 #000000;
  background-image: -webkit-linear-gradient(top, #000000, #99ce5f 50%, #000000);
  background-image: -moz-linear-gradient(top, #000000, #99ce5f 50%, #000000);
  background-image: -o-linear-gradient(top, #000000, #99ce5f 50%, #000000);
  background-image: linear-gradient(to bottom, #568128, #99ce5f 50%, #568128);
}
.fancyprogress .red {
  background: #db3a27;
  border-color: #c73321 #b12d1e #8e2418;
  background-image: -webkit-linear-gradient(top, #ea8a7e, #e15a4a 70%, #db3a27);
  background-image: -moz-linear-gradient(top, #ea8a7e, #e15a4a 70%, #db3a27);
  background-image: -o-linear-gradient(top, #ea8a7e, #e15a4a 70%, #db3a27);
  background-image: linear-gradient(to bottom, #ea8a7e, #e15a4a 70%, #db3a27);
}
.fancyprogress .red2 {
  background: #8e2418;
  border-color: #000000 #000000 #000000;
  background-image: -webkit-linear-gradient(top, #000000, #e15a4a 50%, #000000);
  background-image: -moz-linear-gradient(top, #000000, #e15a4a 50%, #000000);
  background-image: -o-linear-gradient(top, #000000, #e15a4a 50%, #000000);
  background-image: linear-gradient(to bottom, #8e2418, #e15a4a 50%, #8e2418);
}
.fancyprogress .orange {
  background: #f2b63c;
  border-color: #f0ad24 #eba310 #c5880d;
  background-image: -webkit-linear-gradient(top, #f8da9c, #f5c462 70%, #f2b63c);
  background-image: -moz-linear-gradient(top, #f8da9c, #f5c462 70%, #f2b63c);
  background-image: -o-linear-gradient(top, #f8da9c, #f5c462 70%, #f2b63c);
  background-image: linear-gradient(to bottom, #f8da9c, #f5c462 70%, #f2b63c);
}
.fancyprogress .orange2 {
  background: #c5880d;
  border-color: #000000 #000000 #000000;
  background-image: -webkit-linear-gradient(top, #000000, #f5c462 50%, #000000);
  background-image: -moz-linear-gradient(top, #000000, #f5c462 50%, #000000);
  background-image: -o-linear-gradient(top, #000000, #f5c462 50%, #000000);
  background-image: linear-gradient(to bottom, #c5880d, #f5c462 50%, #c5880d);
}
.fancyprogress .blue {
  background: #5aaadb;
  border-color: #459fd6 #3094d2 #277db2;
  background-image: -webkit-linear-gradient(top, #aed5ed, #7bbbe2 70%, #5aaadb);
  background-image: -moz-linear-gradient(top, #aed5ed, #7bbbe2 70%, #5aaadb);
  background-image: -o-linear-gradient(top, #aed5ed, #7bbbe2 70%, #5aaadb);
  background-image: linear-gradient(to bottom, #aed5ed, #7bbbe2 70%, #5aaadb);
}
.fancyprogress .blue2 {
  background: #277db2;
  border-color: #000000 #000000 #000000;
  background-image: -webkit-linear-gradient(top, #000000, #7bbbe2 50%, #000000);
  background-image: -moz-linear-gradient(top, #000000, #7bbbe2 50%, #000000);
  background-image: -o-linear-gradient(top, #000000, #7bbbe2 50%, #000000);
  background-image: linear-gradient(to bottom, #277db2, #7bbbe2 50%, #277db2);
}
/*table td img.off{
    display:none;
}
table td:hover img.off{
    display:inline;
}
table td:hover img.on{
    display:none;
}
table td label.off{
    display:none;
}
table td:hover label.off{
    display:inline;
}
table td:hover label.on{
    display:none;
}*/

.hovertd:hover {
    cursor: pointer; cursor: hand;
}
</style>
<script type="text/javascript" >
function myFunction(clicked_id)
{

	if (document.getElementById(clicked_id).className == "orange"){ document.getElementById(clicked_id).className = "orange2"; }
	else if (document.getElementById(clicked_id).className == "orange2"){ document.getElementById(clicked_id).className = "orange";}
	else if (document.getElementById(clicked_id).className == "red"){ document.getElementById(clicked_id).className = "red2";}
	else if (document.getElementById(clicked_id).className == "red2"){ document.getElementById(clicked_id).className = "red";}
	else if (document.getElementById(clicked_id).className == "blue"){ document.getElementById(clicked_id).className = "blue2";}
	else if (document.getElementById(clicked_id).className == "blue2"){ document.getElementById(clicked_id).className = "blue";}
	else if (document.getElementById(clicked_id).className == "green"){ document.getElementById(clicked_id).className = "green2";}
	else if (document.getElementById(clicked_id).className == "green2"){ document.getElementById(clicked_id).className = "green";}
	else if (document.getElementById(clicked_id).className == "in-checkbox"){alert("memroy clicked");}

	if (clicked_id == "cpu"){
		if (document.getElementById("testid").src == "http://localhost:3000/assets/c2.png"){
		document.getElementById("testid").src = "/assets/2.png"	;
		} 
	else if (document.getElementById("testid").src == "http://localhost:3000/assets/2.png"){
		document.getElementById("testid").src = "/assets/c2.png"	;
		} 
		
	}

	var app1, app2, app3, os1, os2, os3
	if (document.getElementById("first").className == "orange2") { app1 = $("#"+"first").text()}
	if (document.getElementById("second").className == "red2") { app2 = $("#"+"second").text()}
	if (document.getElementById("third").className == "blue2") { app3 = $("#"+"third").text()}
	if (document.getElementById("fourth").className == "green2") { os1 = $("#"+"fourth").text()}
	if (document.getElementById("fifth").className == "orange2") { os2 = $("#"+"fifth").text()}
	if (document.getElementById("sixth").className == "blue2") { os3 = $("#"+"sixth").text()}

	// alert("app version" + "  " +document.getElementById("first").className + "  " +
	// 	                  document.getElementById("second").className + "  " +
	// 	                  document.getElementById("third").className + "  " + 
	// 	   "OS version" + "  " + document.getElementById("fourth").className + "  " +
	// 	   document.getElementById("fifth").className + "  " +
	// 	   document.getElementById("sixth").className + "  " )

	
    $.ajax({
      type: 'POST',
      url: 'reports',
      data: { appversion: [app1, app2, app3], osversions: [os1, os2, os3]},
      success: function(data){
        alert("ok");
        // $("#question").html(data);
      }
    });
    return false;
}

</script>
<div class="container">
	<div class="container">
		<div class="row">
			<div class="area-top clearfix">
				<div class="pull-left header">
					<h3 class="title">
						Report List
					</h3>
					<h5>
						<span>
							Report List
						</span>
					</h5>
				</div>
			</div>
		</div>

		<div class="container">
			<div class="box">
				<div class="box-header">
					<div class="title">Filter</div>
				</div>
				<div class="box-content">
					<table class="table">
						<tbody>
						<% b = Hash.new(0) %>
						<% @reports.to_a().each do |v| %>
						 <% b[v.appversion	] += 1 %>
						<% end %>
						<% b.each do |k, v| %>
						<% end %>
							<tr>
							<% @firstvalue = b.max_by{|k,v| v} %>
							<% b.delete(@firstvalue[0]) %>
					 		<% @secondvalue = b.max_by{|k,v| v} %>
					 		<% b.delete(@secondvalue[0]) %>
					 		<% @thirdvalue = b.max_by{|k,v| v} %>
					 		<% total = @firstvalue[1] + @secondvalue[1] + @thirdvalue[1] %>
								<td>App Version</td>
								<td class="in-checkbox">
									<button style="width:100%" onclick="myFunction()">
									<label for="icheck1">All</label>
									</button>
								</td>
								<td colspan="4">
							    <div class="fancyprogress">
							    <% firstversion =  @firstvalue[1] * 100 / total   %>
							    <% secondversion = @secondvalue[1] * 100 / total  %>
							    <% thirdversion = @thirdvalue[1] * 100 / total  %>
								  <span onclick="myFunction(this.id)" id="first" class="orange" style="width: <%= firstversion %>%;"><span><%= @firstvalue[0] %></span></span>
							      <span onclick="myFunction(this.id)" id="second" class="red" style="width: <%= secondversion %>%;"><span><%= @secondvalue[0] %></span></span>
							      <span onclick="myFunction(this.id)" id="third" class="blue" style="width: <%= thirdversion %>%;"><span><%= @thirdvalue[0] %></span></span>
							    </div>
							    </td>
							</tr>
							<tr>
								<td>OS Version</td>
								<td class="in-checkbox">
								<button style="width:100%">
									<!-- <input type="checkbox" class="icheck" checked id="icheck1"> -->
									<label for="icheck1">All</label>
									</button>
								</td>
								<td colspan="4">
							    <div class="fancyprogress">
							    <% firstversion = 40 %>
							    <% secondversion = 40 %>
							    <% thirdversion = 20 %>
								  <span onclick="myFunction(this.id)" id="fourth" class="green" style="width: <%= firstversion %>%;"><span>1.5</span></span>
							      <span onclick="myFunction(this.id)" id="fifth" class="orange" style="width: <%= secondversion %>%;"><span>2.1</span></span>
							      <span onclick="myFunction(this.id)" id="sixth" class="blue" style="width: <%= thirdversion %>%;"><span>4.1</span></span>
							    </div>
							    </td>
							</tr>
							<tr>
								<td>Category</td>
								<td class="in-checkbox">
								<!-- 	<input type="checkbox" class="icheck" checked id="icheck1"> -->
								<button style="width:100%">
									<label for="icheck1">All</label>
									</button>
								</td>
								<td class="hovertd" style="vertical-align:middle" onClick="myFunction(this.id)" id="memory">							
									<center>
										<img class="off" src="/assets/c1-1.png" height = '32' width = '32'>
										<img class="on" src="/assets/1.png" height = '32' width = '32'>
	 								   	<br> Memory
									</center>
								</td>
								<td class="hovertd" style="vertical-align:middle" onClick="myFunction(this.id)" id="cpu">
									<center>
									<img id="testid" className = "on" src="/assets/2.png" height = '32' width = '32'>
<!-- 										<img class="off" src="/assets/c2.png" height = '32' width = '32'>
										<img class="on" src="/assets/2.png" height = '32' width = '32'> -->
									<br> CPU
									</center>
								</td>
								<td class="hovertd" style="vertical-align:middle" onClick="myFunction(this.id)" id="network">
									<center>
										<img class="off" src="/assets/c3.png" height = '32' width = '32'>
										<img class="on" src="/assets/3.png" height = '32' width = '32'>
									<br>Network
									</center>
								</td>
								<td class="hovertd" style="vertical-align:middle" onClick="myFunction(this.id)" id="battery">
									<center>
										<img class="off" src="/assets/c4.png" height = '32' width = '32'>
										<img class="on" src="/assets/4.png" height = '32' width = '32'>
									 <br>Battery
									 </center>
								</td>
							</tr>
							<tr>
								<td>Scenario Test</td>
																<td class="in-checkbox">
								<button style="width:100%">
									<!-- <input type="checkbox" class="icheck" checked id="icheck1"> -->
									<label for="icheck1">All</label>
									</button>
								</td>
								<td class="hovertd" onClick="valid(this.form)" style="vertical-align:middle">
									<!-- <input type="radio" name="optionsRadios[test]" class="icheck" checked id="iradio1"> -->
									<center>
                					  <label class="off">Yes</label>
                					  <label class="on">Yes</label>
                					  </center>
								</td>
								<td class="hovertd" onClick="valid(this.form)" style="vertical-align:middle">
								<!-- 	<input type="radio" name="optionsRadios[test]" class="icheck" id="iradio2"> -->
								<center>
               						   <label class="off">No</label>
               						    <label class="on">No</label>
               						    </center>
								</td>
							</tr>
							<tr>
								<td>Status</td>
								<td class="in-checkbox">
								<button style="width:100%">
									<!-- <input type="checkbox" class="icheck" checked id="icheck1"> -->
									<label for="icheck1">All</label>
									</button>
								</td>
								<td class="hovertd" onClick="valid(this.form)" style="vertical-align:middle">
								<!-- 	<input type="radio" name="optionsRadios[error]" class="icheck" id="iradio1"> -->
								<center>
              						    <label class="off">Success</label>
              						     <label class="on">Success</label>
              						    </center>
								</td>
								<td class="hovertd" onClick="valid(this.form)" style="vertical-align:middle">
								<!-- 	<input type="radio" name="optionsRadios[error]" class="icheck" checked id="iradio4"> -->
								<center>
             					     <label class="off">Fail</label>
             					       <label class="on">Fail</label>
             					     </center>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

		<div class="container">
			<div class="box">
				<div class="box-content">
					<table id="dataList" class="table table-normal">
						<thead>
							<tr>
								<td></td>
								<td>App version</td>
								<td>Category</td>
								<td>Status</td>
								<td>Time for Profiling</td>
								<td>Date</td>
							</tr>
						</thead>
						<tbody>
							<% @reports.each do |report| %>
								<tr>
									<td></td>
									<td><%= link_to report.appversion, [@project, report] %></td>
									<td>
									<%= image_tag("1.png", :alt => "Edit Entry")  if report.categories.include? 'Memory'%>
									<%= image_tag("2.png", :alt => "Edit Entry")  if report.categories.include? 'CPU'%>
									<%= image_tag("3.png", :alt => "Edit Entry") if report.categories.include? 'Network' %>
									<%= image_tag("4.png", :alt => "Edit Entry") if report.categories.include? 'Battery'  %>
									</td>
									<td><%= report.error_status %></td>
									<td><%= report.time_for_profiling %></td>
									<td><%= report.created_at_date %></td>
								</tr>
							<% end  %>
						</tbody>
					</table>
				</div>
			</div>
			<div class="text-center">
				<ul class="pagination">
					<%= paginate @reports %>
				</ul>
			</div>
		</div>
	</div>
</div>